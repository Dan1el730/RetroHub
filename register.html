<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width,initial-scale=1" />
	<title>RetroHub â€” Register</title>
	<link rel="stylesheet" href="styles.css">
	<style>
		.auth-container { max-width:420px;margin:60px auto;padding:20px;border-radius:8px;background:#fff;box-shadow:0 4px 18px rgba(0,0,0,.08); }
		.auth-field { display:block;width:100%;padding:10px;margin:8px 0;border:1px solid #ddd;border-radius:6px; }
		.auth-actions { display:flex;gap:8px;margin-top:12px; }
		.btn { padding:10px 14px;border-radius:6px;border:0;cursor:pointer; }
		.btn-green { background:#2dd36f;color:#fff; }
		.btn-blue { background:#2b8cff;color:#fff; }
	</style>
</head>
<body>
	<div class="auth-container" role="main" aria-label="Register form">
		<h1>Register</h1>
		<label>
			<input id="username" class="auth-field" placeholder="Choose a username" autocomplete="username">
		</label>
		<label>
			<input id="password" type="password" class="auth-field" placeholder="Password" autocomplete="new-password">
		</label>
		<label>
			<input id="confirm" type="password" class="auth-field" placeholder="Confirm password" autocomplete="new-password">
		</label>

		<div class="auth-actions">
			<button id="register-btn" class="btn btn-green">Register</button>
			<button id="back-login" class="btn btn-blue">Back to Login</button>
		</div>

		<div id="msg" style="margin-top:12px;color:#b00;"></div>
	</div>

	<script src="scripts/auth.js"></script>
	<script>
		const registerBtn = document.getElementById('register-btn');
		const backBtn = document.getElementById('back-login');
		const msg = document.getElementById('msg');

		registerBtn.addEventListener('click', async () => {
			msg.textContent = '';
			const u = document.getElementById('username').value.trim();
			const p = document.getElementById('password').value;
			const c = document.getElementById('confirm').value;
			if (!u || !p) { msg.textContent = 'Provide username and password'; return; }
			if (p !== c) { msg.textContent = 'Passwords do not match'; return; }
			try {
				await window.auth.register(u, p);
				window.location.href = 'index.html';
			} catch (e) {
				msg.textContent = e.message || 'Registration failed';
			}
		});

		backBtn.addEventListener('click', () => {
			window.location.href = 'login.html';
		});
	</script>
</body>
</html>
